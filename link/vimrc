" Store as ~/.emacs
" Andrew Z Allen

set nocompatible

" Vundle {{{
" https://github.com/gmarik/vundle
set rtp+=~/.vim/bundle/vundle/
call vundle#rc()
let g:vundle_default_git_proto = 'git'
Bundle 'gmarik/vundle'

" Load plugins
Bundle 'tomasr/molokai'
Bundle 'vim-ruby/vim-ruby'

" CtrlP
Bundle 'kien/ctrlp.vim'

" Confiure plugins
"colorscheme molokai
" }}}
" Vim UI {{{
" Turn on line numbers
set number

" Set reasonable tab settings
set tabstop=2
set softtabstop=2
set shiftwidth=2
set expandtab

" Hilight the current line
set cursorline

" Turn on modelines
set modelines=1

" Only redraw when absolutely necessary
set lazyredraw

" Show matching characters ([{}])
set showmatch

" Turn on syntax hilighting
syntax on
filetype plugin indent on     " required! (for vundle)

" Save to system clipboard
set clipboard=unnamedplus
" }}}
" Search {{{
" Incremental search
set incsearch

" Hilight as searching
" This will keep the hilighting active until disabled
set hlsearch

" CtrlP search settings
let g:ctrlp_map = '<c-p>'
let g:ctrlp_cmd = 'CtrlP'

" When invoked, unless a starting directory is specified, CtrlP will set its
" local working directory according to this variable:
" 'c' - the directory of the current file.
" 'r' - the nearest ancestor that contains one of these directories or files:
"     .git .hg .svn .bzr _darcs
" 'a' - like c, but only if the current working directory outside of CtrlP is
"     not a direct ancestor of the directory of the current file.
" 0 or '' (empty string) - disable this feature.
let g:ctrlp_working_path_mode = 'ra'

" Exclude unintereesting files
set wildignore+=*/tmp/*,*.so,*.swp,*.zip

nnoremap <leader>. :CtrlPTag<cr>

" }}}
" Tmux {{{
" When in insert mode in Tmux use a better cursor symbol (narrow insert)
if exists('$TMUX')
  let &t_SI = "\<Esc>Ptmux;\<Esc>\<Esc>]50;CursorShape=1\x7\<Esc>\\"
  let &t_EI = "\<Esc>Ptmux;\<Esc>\<Esc>]50;CursorShape=0\x7\<Esc>\\"
else
  let &t_SI = "\<Esc>]50;CursorShape=1\x7"
  let &t_EI = "\<Esc>]50;CursorShape=0\x7"
endif
" }}}
" Backups {{{
" Backups are awesome, but litter .swp files everywhere. Move backups to /tmp
set backup
set backupdir=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp
set backupskip=/tmp/*,/private/tmp/*
set directory=~/.vim-tmp,~/.tmp,~/tmp,/var/tmp,/tmp
set writebackup
" }}}
" Vim Hard Mode {{{
nnoremap <up> <nop>
nnoremap <down> <nop>
nnoremap <left> <nop>
nnoremap <right> <nop>
inoremap <up> <nop>
inoremap <down> <nop>
inoremap <left> <nop>
inoremap <right> <nop>
" }}}

" Load the local vim config
source ~/.vimrc_local

" vim:foldmethod=marker:foldlevel=0
